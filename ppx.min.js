var PPX=function(){function a(a){var b=document.createElement("a");return b.setAttribute("href",a),b.href}function b(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function c(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)}function d(a){var b=[];for(var c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")}function e(a){return g("?"+a).queryKey}function f(a,b){return a=g(a),b=g(b),a.protocol==b.protocol&&a.authority==b.authority}function g(a){var b=g.options,c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;while(e--)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=decodeURIComponent(e))}),d}function h(a,b,c){var d,e=Array.prototype.indexOf;if(b){if(e)return e.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1}function i(a,f,g,h){function i(){try{return"contentWindow"in a?a.contentWindow:a}catch(b){return a}}function k(a){if(a.source!=i())return;if(f!="*"&&a.origin!=f){j.error("message from invalid origin: "+a.origin);return}var b=e(a.data);"__simpleChannelError"in b?j.onError(b.__simpleChannelError):j.onMessage(b)}var j={onMessage:g,onError:h||function(a){window.console&&window.console.error&&window.console.error(a)},destroy:function(){c(window,"message",k),a=null,g=null},send:function(a){i().postMessage(d(a),f)},error:function(a){i().postMessage(d({__simpleChannelError:a}),f)}};return b(window,"message",k),j}g.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var j=["Accept","Content-Type","X-Requested-With"];return{utils:{decode:e,encode:d,inArray:h,isSameOrigin:f,absolutifyURL:a},alwaysAllowHeaders:j,startServer:function(a){var b=a.allowOrigin,c=a.window||window.parent,d=i(c,b,function(b){switch(b.cmd){case"send":var c=new XMLHttpRequest,g=e(b.headers),i=h(b.method.toUpperCase(),a.allowMethods)!=-1;if(!i){d.error("method '"+b.method+"' is not allowed.");return}if(!f(window.location.href,b.url)){d.error("url does not have same origin: "+b.url);return}c.open(b.method,b.url),c.onreadystatechange=function(){d.send({cmd:"readystatechange",readyState:c.readyState,status:c.status,statusText:c.statusText,responseText:c.responseText,responseHeaders:c.getAllResponseHeaders()})};for(var k in g)if(h(k,a.allowHeaders)!=-1||h(k,j)!=-1)c.setRequestHeader(k,g[k]);else{d.error("header '"+k+"' is not allowed.");return}c.send(b.body||null)}});d.send({cmd:"ready"})},buildClientConstructor:function(b){return function c(){function k(){f&&(f.destroy(),f=null),g&&(document.body.removeChild(g),g=null)}var c,e,f,g,h={},j="",l={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,readyState:0,status:0,statusText:"",responseText:"",open:function(a,b){c=a,e=b,l.readyState=l.OPENED,l.onreadystatechange&&l.onreadystatechange()},setRequestHeader:function(a,b){h[a]=b},getAllResponseHeaders:function(){return j},abort:function(){g&&(k(),l.readyState=l.DONE,l.onreadystatechange&&l.onreadystatechange(),l.readyState=l.UNSENT)},send:function(m){if(l.readyState==l.UNSENT)throw new Error("request not initialized");g=document.createElement("iframe"),f=i(g,"*",function(b){switch(b.cmd){case"ready":f.send({cmd:"send",method:c,url:a(e),headers:d(h),body:m||""});break;case"readystatechange":l.readyState=parseInt(b.readyState),l.status=parseInt(b.status),l.statusText=b.statusText,l.responseText=b.responseText,j=b.responseHeaders,l.readyState==4&&k(),l.onreadystatechange&&l.onreadystatechange()}},function(a){window.console&&window.console.warn&&window.console.warn(a),l.responseText=a,l.readyState=l.DONE,k(),l.onreadystatechange&&l.onreadystatechange()}),g.setAttribute("src",a(b)),g.style.display="none",document.body.appendChild(g)}};return l}}}}();